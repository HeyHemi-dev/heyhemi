---
import MarkdownInlines from "./MarkdownInlines.astro";
import { parseMarkdownValue, type MarkdownValueInput } from "../utils/markdown";

const { value } = Astro.props as { value: MarkdownValueInput };

const parsed = parseMarkdownValue(value);
---

{
  parsed.kind === "empty" ? null : parsed.kind === "plain" ? (
    <p class="whitespace-pre-line">{parsed.text}</p>
  ) : (
    parsed.blocks.map((block) => {
      if (block.type === "paragraph") {
        return (
          <p>
            <MarkdownInlines tokens={block.inlines} />
          </p>
        );
      }
      return null;
    })
  )
}
